!function(){function t(){/Mobile/.test(navigator.userAgent)?(this.curPan="log-console",this.eleStyle={},this.inputLog=[],this.xhrDetail={},this.staticSource={},this.init()):console.warn("Lemon must run on a mobile platform")}var e=function(t,e){return null!==Object.prototype.toString.call(t).match(e)},o=function(t){var e=document.querySelectorAll(t);return e.length>0?e.length>1?e:e[0]:null},n=function(t,e,o){if(t.length)for(var n=0;n<t.length;n++)t[n].addEventListener(e,o,!1);else t.addEventListener(e,o,!1)},a=function(t,e,o){if(t.length)for(var n=0;n<t.length;n++)t[n].removeEventListener(e,o,!1);else t.removeEventListener(e,o,!1)},i=function(t,e,o){if(/^file/.test(t))o&&o({statusText:"can not views local file",status:""});else{var n=new window._XMLHttpRequest;n.open("get",t,!1),n.onreadystatechange=function(){this.readyState==this.DONE&&(/(^2\d{2})$|304/.test(this.status)?e&&e(this.responseText):o&&o(this))},n.send()}},l=function(){return(Math.random()+"").substr(2)},r=function(){return!!window.Blob}();t.prototype={init:function(){this.appendDom(),this.appendStyle(),this.bindEvent()},appendDom:function(){o("body").innerHTML+='<div id="log-container" class="log-container">          <a class="log-switch" href="javascript:;">lemon</a>          <div class="log-pannal pos-r">            <span class="log-detail-close hide">×</span>            <div class="log-detail hide"></div>            <div class="log-pannal-btn-par">              <ul class="log-pannal-btn clearfix">                <li id="log-console" class="fff-b"><a href="javascript:;">Console</a></li>                <li id="log-style"><a href="javascript:;">Style</a></li>                <li id="log-cookie"><a href="javascript:;">Cookie</a></li>                <li id="log-storage"><a href="javascript:;">Storage</a></li>                <li id="log-xhr"><a href="javascript:;">Xhr</a></li>                <li id="log-static"><a href="javascript:;">Static</a></li>                <li id="log-about"><a href="javascript:;">About</a></li>              </ul>            </div>            <ul class="log-pannal-log">              <li id="log-console-pan"></li>              <li id="log-style-pan"></li>              <li id="log-cookie-pan" class="hide"></li>              <li id="log-storage-pan" class="hide"></li>              <li id="log-xhr-pan" class="hide"></li>              <li id="log-static-pan" class="hide"></li>              <li id="log-about-pan" class="hide">意见和建议请到：<a href="https://github.com/wangzongxu/lemon">https://github.com/wangzongxu/lemon</a><br/>邮箱：308929264@qq.com</li>            </ul>            <ul class="log-pannal-bottom">              <li id="log-clear" class="w-20-p" data-type="log-console">                <a href="javascript:;">Clear</a>              </li>              <li class="p-0 w-80" data-type="log-console">                <input id="log-try-input" class="try-input" type="text" placeholder="  Use console.log() to output" value="">              </li>              <li id="log-style-enter" class="hide" data-type="log-style">                <a href="javascript:;">Enter</a>              </li>              <li id="log-style-leave" class="hide" data-type="log-style">                <a href="javascript:;">Leave</a>              </li>              <li id="log-style-detail" class="hide" data-type="log-style">                <a href="javascript:;">detail</a>              </li>              <li id="log-storage-local" class="hide" data-type="log-storage">                <a href="javascript:;">local</a>              </li>              <li id="log-storage-session" class="hide" data-type="log-storage">                <a href="javascript:;">session</a>              </li>              <li id="log-static-css" class="hide" data-type="log-static">                <a href="javascript:;">Css</a>              </li>              <li id="log-static-js" class="hide" data-type="log-static">                <a href="javascript:;">Js</a>              </li>              <li id="log-static-img" class="hide" data-type="log-static">                <a href="javascript:;">Image</a>              </li>            </ul>          </div>        </div>'},appendStyle:function(){var t=o("#log-container"),e=document.createElement("style");e.setAttribute("scoped",!0),e.textContent=".log-container .fff-b{  background: #fff!important}.log-container table td,.log-container table th{  border-bottom: 1px solid #CCC}.log-container .w-80{  width: 80%!important}.log-container .w-20-p{  width: calc(20% - 12px)!important}.log-container .p-0{  padding: 0!important}.log-container .w-all{  width: 100%}.log-container .log-algin-center{  position: absolute;  left: 0;  top: 0;  right: 0;  bottom: 0;  margin: auto}.log-container .clearfix:after{  display: block;  content: '';  clear: both;  width: 0;  height: 0;}.log-container .pos-r{  position: relative;}.log-container .pos-a{  position: absolute;}.log-container .c-red{  color: red!important}.log-container .c-orange{  color: orange!important}.log-container .c-green{  color: green!important}.log-container .c-blue{  color: blue!important}.log-container.hide,.log-container .hide{  display: none;}.log-action{  outline: 1px solid #FF9800!important;  background:rgba(255, 152, 0, 0.18)!important;}.log-container *{  margin: 0;  padding: 0;  font-size: 13px;  text-align: initial;  background: initial;  box-sizing: content-box;  border: initial;}.log-container table td,.log-container table th{  border-right: 1px solid #CCC}.log-container .log-pannal{  z-index: 9999998;  position: fixed;  bottom: 0;  left: 0;  height: 40%;  min-height: 270px;  background: #fff;  width: 100%;}.log-container ul,.log-container li{  list-style: none}.log-container .text-hide{  white-space: nowrap;  overflow: hidden;  text-overflow: ellipsis;}.log-container a,.log-container a:hover,.log-container a:target,.log-container a:visited,.log-container a:link{  text-decoration: none;  -webkit-tap-highlight-color: rgba(0,0,0,0);  tap-highlight-color: rgba(0,0,0,0);　-webkit-tap-highlight-color: transparent;  tap-highlight-color: transparent;  color:#333;}.log-container .log-pannal .log-pannal-btn,.log-container .log-pannal .log-pannal-bottom{  overflow: auto;  width: 100%;  height: 40px;  background: #F3F3F3;  border-top:1px solid #CCC;  border-bottom:1px solid #CCC;}.log-container .log-pannal .log-pannal-btn>li,.log-container .log-pannal .log-pannal-bottom>li{  float: left;  height: 100%;  line-height: 40px;  text-align: center;  padding: 0 5px;  border-right: 1px solid #CCC;  background: #F3F3F3;}.log-container .log-pannal-btn-par{  width: 100%;  overflow: auto;}.log-container .log-pannal-btn-par::scrollbar {    display: none;}.log-container .log-pannal-btn-par::-webkit-scrollbar {    display: none;}.log-container .log-pannal .log-pannal-btn{  width: 150%;  min-width: 100%;}.log-container .log-pannal .log-pannal-log{  overflow: hidden;  width: 100%;  height: calc(100% - 82px);}.log-container .log-pannal .log-detail{  overflow: auto;  /*word-wrap: break-word;*/  width: 100%;  height: 100%;  border-top: 1px solid #CCC;  background: #fff}.log-container .log-detail-close{  position: absolute;  top: 10px;  right: 10px;  line-height: 30px;  height: 30px;  font-size: 30px;  cursor:pointer}.log-container .log-pannal .log-pannal-log>li{  width: 100%;  height: 100%;  word-wrap: break-word;  overflow: auto;}.log-container .log-pannal .log-pannal-log>li#log-console-pan>p{  border-bottom: 1px solid #CCC;  line-height: 22px;  word-wrap: break-word;  overflow: auto;}.log-container .log-pannal-bottom>li .try-input{  width: calc(100vw - 45px);  height: 100%;  border:none;}.log-container .log-pannal-bottom>li>a:active{  color: #fff!important;}.log-container .log-switch{  -webkit-user-select:none;  user-select:none;  position: fixed;  display: block;  z-index: 9999999;  border-radius:10% 50% 10% 50%;  left: 80%;  top: 85%;  min-width: 40px;  width: 45px;  height: 45px;  line-height: 45px;  font-weight: bold;  background: rgb(253,228,143);  background: -webkit-linear-gradient(left top,rgb(253,228,143),rgb(246,193,52));  background: linear-gradient(left top,rgb(253,228,143),rgb(246,193,52));  box-shadow: #333 5px 5px 33px -5px;  text-align: center;}.log-container .log-switch.active{  background: rgb(176, 233, 108)!important;  box-shadow: rgb(145, 215, 63) 5px 5px 33px -5px;}",t.insertBefore(e,t.firstElementChild)},bindEvent:function(){this.replaceNativeLog(),this.replaceNativeError(),this.replaceHttpRequest(),this.selectListener(),this.clearListener(),this.getCookiesListener(),this.getStorageListener(),this.getStyleListener(),this.getStaticListener(),this.togglePannal(),this.detailClose(),this.tryItOut()},tableBegin:function(t,e,o,n){return'<table class="w-all">                  <col width="'+o+'%">                  <col width="'+n+'%">                  <thead>                    <th>'+t+"</th>                    <th>"+e+"</th>                  </thead>                  <tbody>"},tableEnd:function(){return"</tbody></table>"},detailClose:function(){n(o("#log-container .log-detail-close"),"touchend",function(){this.classList.add("hide"),o("#log-container .log-detail").classList.add("hide"),o("#log-container .log-detail").innerHTML=""})},togglePannal:function(){function t(t){0!=t.changedTouches.length&&(i.style.top=t.changedTouches[0].clientY-s.my+"px",i.style.left=t.changedTouches[0].clientX-s.mx+"px",r=!0)}function e(o){a(document.documentElement||document.body,"touchmove",t),a(document.documentElement||document.body,"touchend",e)}var i=o(".log-container .log-switch"),l=o(".log-container .log-pannal"),r=!1,s={mx:null,my:null};n(i,"touchstart",function(o){this.classList.add("active"),0!=o.touches.length&&(o.preventDefault(),s.mx=o.touches[0].clientX-this.offsetLeft,s.my=o.touches[0].clientY-this.offsetTop,n(document.documentElement||document.body,"touchmove",t),n(document.documentElement||document.body,"touchend",e))}),n(i,"touchend",function(t){this.classList.remove("active"),r||l.classList.toggle("hide"),r=!1})},selectListener:function(){var t=this,e=o(".log-pannal-log>li"),a=o(".log-pannal-btn>li"),i=[].reduce.call(a,function(t,e){return t+parseFloat(getComputedStyle(e).width)+11},1);o(".log-pannal-btn").style.width=i+"px",n(a,"touchend",function(){for(var n=0;n<e.length;n++)e[n].classList.add("hide"),a[n].classList.remove("fff-b");t.curPan=this.id,o("#"+t.curPan+"-pan").classList.remove("hide"),this.classList.add("fff-b");for(var i=o(".log-pannal-bottom>li"),l=0;l<i.length;l++)i[l].dataset.type==t.curPan?i[l].classList.remove("hide"):i[l].classList.add("hide")})},clearListener:function(){n(o("#log-clear"),"touchend",function(){o("#log-console-pan").innerHTML=""})},renderLog:function(t){var e="c-black";switch(t.type){case"warn":e="c-orange";break;case"error":e="c-red";break;case"info":e="c-blue"}var n=document.createElement("p");t.log instanceof Error?n.innerHTML=t.log.name+" : "+t.log.message:n.innerHTML="object"==typeof t.log?"<pre><code>"+JSON.stringify(t.log,!1,2)+"</code></pre>":"<pre><code>"+t.log+"</code></pre>",n.className=e,o("#log-console-pan").appendChild(n),o("#log-console-pan").scrollTop=o("#log-console-pan").scrollHeight},replaceHttpRequest:function(){function t(){var n='Uncaught TypeError: Failed to construct "XMLHttpRequest": Please use the "new" operator, this DOM object constructor cannot be called as a function.';if(!(this instanceof t))throw console.error(n),new Error(n);var i=new window._XMLHttpRequest;return i.__lemon_data__={},i.addEventListener("readystatechange",function(){if(this.readyState==this.DONE){var t="c-red";/(^2\d{2})$|304/.test(this.status)?t="c-green":console.error(this.__lemon_data__.method.toUpperCase()+"     "+this.__lemon_data__.requestUrl+"     "+this.status),["responseURL","responseType","timeout","withCredentials"].forEach(function(t){i.__lemon_data__[t]=e(i[t],"undefined")?"":i[t]});try{if(r&&"blob"==i.responseType&&window.FileReader){var n=new FileReader;n.readAsText(i.response),n.onload=function(){i.__lemon_data__.responseText=n.result},n.onerror=function(t){i.__lemon_data__.responseText="Error in FileReader :"+t}}else i.__lemon_data__.responseText=i.responseText}catch(t){i.__lemon_data__.responseText="[ "+i.responseType+" ]"}this.getAllResponseHeaders().split("\n").forEach(function(t){var e=t.split(":");e[0].trim()&&(i.__lemon_data__[e[0]]=e[1])});var s="xhr"+l();a.xhrDetail[s]=this.__lemon_data__;var c='<tr id="'+s+'"><td>'+this.__lemon_data__.requestUrl+'</tb><td class="'+t+'">'+this.status+" "+this.statusText+"</td></tr>";o("#log-xhr-pan tbody").innerHTML+=c}}),i._open=i.open,i.open=function(){for(var t=["method","requestUrl","async","username","password"],e=0;e<t.length;e++){var o=t[e];void 0!==arguments[e]&&(i.__lemon_data__[o]=arguments[e])}return this._open.apply(this,arguments)},i._setRequestHeader=i.setRequestHeader,i.setRequestHeader=function(t,e){return i.__lemon_data__[t]=e,i._setRequestHeader(t,e)},i._send=i.send,i.send=function(t){var e="object"==typeof t?JSON.stringify(t):t;return i.__lemon_data__.body=e||null,i._send(t)},i}var a=this;o("#log-xhr-pan").innerHTML=this.tableBegin("URL","Status",60,40)+this.tableEnd(),n(o("#log-xhr-pan tbody"),"touchend",function(t){var e=t.target;"TD"==e.tagName&&(e=t.target.parentNode);var n=a.xhrDetail[e.id],i=a.tableBegin("prop","value",40,60);for(var l in n)n.hasOwnProperty(l)&&(i+="<tr><td>"+l+"</tb><td>"+n[l]+"</td></tr>");i+=a.tableEnd(),o("#log-container .log-detail").innerHTML=i,o("#log-container .log-detail").classList.remove("hide"),o("#log-container .log-detail-close").classList.remove("hide")}),window._XMLHttpRequest=window.XMLHttpRequest,t.prototype=window._XMLHttpRequest.prototype,window.XMLHttpRequest=t},replaceNativeLog:function(){var t=this;window._console={},["log","error","warn","info","dir"].forEach(function(e){window._console[e]=window.console[e],window.console[e]=function(o){t.renderLog({type:e,log:o});try{return window._console[e](o)}catch(t){}}})},replaceNativeError:function(){window.onerror=function(t,e,o,n,a){/Illegal invocation/i.test(t)||console.error("Error: "+t+" Script: "+(e||"unknown")+" Line: "+o+" Column: "+n)}},getStyleListener:function(){function t(t){var n=t.target;do{if("log-container"===n.id)return}while(n=n.parentNode);t.target.classList.add("log-action"),t.target!=l&&(l&&l.classList.remove("log-action"),l=t.target);var a=getComputedStyle(t.target);e.eleStyle=a;var i="<tr><td>tagName</tb><td>"+t.target.tagName.toLowerCase()+"</td></tr>";["width","height","paddingTop","paddingBottom","paddingLeft","paddingRight","marginTop","marginBottom","marginLeft","marginRight","display","opacity","zIndex","position","top","bottom","left","right","float","font-size","font-weight","border","lineHeight","overflow"].forEach(function(t){i+="<tr><td>"+t+"</tb><td>"+a[t]+"</td></tr>"}),o("#log-style-pan tbody").innerHTML=i}var e=this,i=!1,l=null,r=!0;o("#log-style-pan").innerHTML=e.tableBegin("prop","value",40,60)+e.tableEnd(),n(o("#log-style-enter"),"touchend",function(){i||(i=!0,r&&(alert("Touch elements to watch computedStyle"),r=!1),n(document.documentElement||document.body,"touchend",t))}),n(o("#log-style-leave"),"touchend",function(){a(document.documentElement||document.body,"touchend",t),l&&l.classList.remove("log-action"),i=!1}),n(o("#log-style-detail"),"touchend",function(){var t=e.tableBegin("prop","value",40,60);for(var n in e.eleStyle)e.eleStyle.hasOwnProperty(n)&&isNaN(1*n)&&"cssText"!==n&&(t+="<tr><td>"+n+"</tb><td>"+e.eleStyle[n]+"</td></tr>");t+=e.tableEnd(),o("#log-container .log-detail").innerHTML=t,o("#log-container .log-detail").classList.remove("hide"),o("#log-container .log-detail-close").classList.remove("hide")})},getCookiesListener:function(){o("#log-cookie-pan").innerHTML=this.tableBegin("key","value",40,60)+this.tableEnd(),n(o("#log-cookie"),"touchend",function(){if(""!==document.cookie){var t="";document.cookie.split("; ").forEach(function(e){var o=e.split("=");t+="<tr><td>"+o[0]+"</tb><td>"+o[1]+"</td></tr>"}),o("#log-cookie-pan tbody").innerHTML=t}})},getStorageListener:function(){o("#log-storage-pan").innerHTML=this.tableBegin("key","value",40,60)+this.tableEnd(),n(o("#log-storage-session"),"touchend",function(){if(0!=sessionStorage.length){for(var t="",e=0;e<sessionStorage.length;e++){var n=sessionStorage.key(e);t+="<tr><td>"+n+"</tb><td>"+sessionStorage.getItem(n)+"</td></tr>"}o("#log-storage-pan tbody").innerHTML=t}}),n(o("#log-storage-local"),"touchend",function(){if(0!=localStorage.length){for(var t="",e=0;e<localStorage.length;e++){var n=localStorage.key(e);t+="<tr><td>"+n+"</tb><td>"+localStorage.getItem(n)+"</td></tr>"}o("#log-storage-pan tbody").innerHTML=t}})},getStaticListener:function(){var t=this;o("#log-static-pan").innerHTML=t.tableBegin("file","url",40,60)+t.tableEnd(),n(o("#log-static-pan tbody"),"touchend",function(e){var n=e.target;"TD"==n.tagName&&(n=e.target.parentNode);var a=t.staticSource[n.id],l="";/^img/.test(a.id)?l+='<img style="max-height:80%" class="log-algin-center" src="'+a.url+'" alt="'+a.name+'">':(l+="<pre><code>","inline"==a.url?l+=a.textContent.replace(/</g,"&lt;"):i(a.url,function(t){l+=t.replace(/</g,"&lt;")},function(t){l+='<p style="color:#CCC;font-size:30px;line-height:100px;text-align:center">'+t.statusText+" "+t.status+"</p>"}),l+="</code></pre>"),o("#log-container .log-detail").innerHTML=l,o("#log-container .log-detail").classList.remove("hide"),o("#log-container .log-detail-close").classList.remove("hide")}),n(o("#log-static-css"),"touchend",function(){t.staticSource={};var e="",n=o("link");n=n.length?n:[n];for(c=0;c<n.length;c++){var a=n[c];if("stylesheet"==a.rel&&""!=a.href.trim()){var i=/\/([^\/]+?\.css)/.exec(a.href),r={name:i?i[1]:" ",url:a.href,id:"css"+l()};e+="<tr id="+r.id+" ><td>"+r.name+"</tb><td>"+r.url+"</td></tr>",t.staticSource[r.id]=r}}var s=o("style");s=s.length?s:[s];for(var c=0;c<s.length;c++){var d=s[c];if(""!=d.textContent.trim()){var g={name:"&lt;style&gt;...&lt;/style&gt;",url:"inline",textContent:d.textContent,id:"css"+l()};e+="<tr id="+g.id+" ><td>"+g.name+"</tb><td>"+g.url+"</td></tr>",t.staticSource[g.id]=g}}o("#log-static-pan tbody").innerHTML=e}),n(o("#log-static-js"),"touchend",function(){t.staticSource={};var e="",n=o("script");n=n.length?n:[n];for(var a=0;a<n.length;a++){var i=n[a];if(""!=i.src.trim()){var r=/\/([^\/]+?\.js)/.exec(i.src),s={name:r?r[1]:" ",url:i.src,id:"js"+l()};e+="<tr id="+s.id+" ><td>"+s.name+"</tb><td>"+s.url+"</td></tr>",t.staticSource[s.id]=s}else if(""!=i.textContent.trim()){var c={name:"&lt;script&gt;...&lt;/script&gt;",url:"inline",textContent:i.textContent,id:"js"+l()};e+="<tr id="+c.id+" ><td>"+c.name+"</tb><td>"+c.url+"</td></tr>",t.staticSource[c.id]=c}}o("#log-static-pan tbody").innerHTML=e}),n(o("#log-static-img"),"touchend",function(){t.staticSource={};var e="",n=o("img");n=n.length?n:[n];for(var a=0;a<n.length;a++){var i=n[a],r=/\/([^\/]+?\..{1,4}$)/.exec(i.src),s={name:r?r[1]:"unknown",url:i.src,id:"img"+l()};e+="<tr id="+s.id+" ><td>"+s.name+"</tb><td>"+s.url+"</td></tr>",t.staticSource[s.id]=s}o("#log-static-pan tbody").innerHTML=e})},tryItOut:function(){var t=this,e=0;n(o("#log-try-input"),"keyup",function(o){var n=o.target.value;if(13==o.keyCode){if(""===n.trim())return;e=0,t.inputLog.push(n);var a=document.createElement("script");return a.async=!1,a.type="text/javascript",a.innerHTML="try{"+n.replace(/(^|[^.])log\(/g," console.log(")+' }catch(e){if(e.message !=="Illegal invocation"){console.error(e)}}',document.body.appendChild(a),setTimeout(function(){document.body.removeChild(a)}),void(o.target.value="")}if(38==o.keyCode){if(e>=t.inputLog.length)return;e++}else{if(40!=o.keyCode)return;e--}var i=t.inputLog[t.inputLog.length-e];void 0!==i?o.target.value=i:(e=0,o.target.value="")})}};try{new t}catch(t){alert(t)}}();